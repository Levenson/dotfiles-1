; -*- mode: Lisp;-*-

#-:asdf (load (merge-pathnames "quicklisp/asdf.lisp" (user-homedir-pathname)))

;;; The following lines added by ql:add-to-init-file:
#-quicklisp
(let ((quicklisp-init (merge-pathnames "quicklisp/setup.lisp"
                                       (user-homedir-pathname))))
  (when (probe-file quicklisp-init)
    (load quicklisp-init)))

;;; quicklisp projects
(push #p"/home/russell/projects/cl-git/" asdf:*central-registry*)
(push #p"/home/russell/projects/planet-git/" asdf:*central-registry*)
(push #p"/home/russell/projects/database-migrations/" asdf:*central-registry*)
(push (merge-pathnames ".emacs.d/el-get/slime/"
		       (user-homedir-pathname))
      asdf:*central-registry*)

;;; slime stuff
;(push #P "/home/russell/.emacs.d/el-get/slime-proxy/" swank::*load-path*)
;(push #P "/home/russell/.emacs.d/el-get/slime-proxy/contrib/slime-parenscript/" swank::*load-path*)

;; Enable debug
(sb-ext:restrict-compiler-policy 'debug 3)

;;; Check for --no-linedit command-line option.
; (if (member "--no-linedit" sb-ext:*posix-argv* :test 'equal)
;     (setf sb-ext:*posix-argv*
; 	  (remove "--no-linedit" sb-ext:*posix-argv* :test 'equal))
;     (when (interactive-stream-p *terminal-io*)
;       (require :sb-aclrepl)
;       (require :linedit)
;       (funcall (intern "INSTALL-REPL" :linedit) :wrap-current t)))


;;; Hash table printing
(defun print-ht (ht &aux (*print-pretty* t))
  (format t "~&~s~%" ht)
  (maphash (lambda (k v) (format t "~@<~S~20T~3I~_~S~:>~%" k v)) ht)
  (values))
